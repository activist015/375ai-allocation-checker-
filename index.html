<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fun Allocation Check</title>
<style>
:root { --bg1:#0f172a; --bg2:#111827; --accent:#6ee7ff; --accent2:#a78bfa; --text:#e5e7eb; --muted:#9ca3af; }
* { box-sizing: border-box; }
body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; background: radial-gradient(1000px 600px at 10% -10%, rgba(167,139,250,.25), transparent), radial-gradient(1000px 600px at 90% 110%, rgba(110,231,255,.25), transparent), linear-gradient(180deg, var(--bg1), var(--bg2)); color: var(--text); min-height: 100vh; display:flex; align-items:center; justify-content:center; padding:16px;}
.card { width: 100%; max-width: 560px; background: rgba(17,24,39,.7); backdrop-filter: blur(8px); border: 1px solid rgba(255,255,255,.07); border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,.4); padding: 20px; }
h1 { font-size: 1.5rem; margin:0 0 6px; }
p { color: var(--muted); margin-top:0 }
label { font-size:.9rem; color:#cbd5e1; display:block; margin: 12px 0 6px; }
input, select { width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,.08); background: rgba(2,6,23,.6); color: var(--text); outline: none; }
input::placeholder{color:#64748b}
.row { display:grid; grid-template-columns: 1fr; gap: 12px; }
@media(min-width:520px){ .row{ grid-template-columns: 1fr 1fr; } }
.btn { margin-top:14px; width:100%; padding: 12px 16px; border-radius: 12px; border: none; background: linear-gradient(90deg, var(--accent), var(--accent2)); color: #0b1220; font-weight: 700; cursor:pointer; }
.btn.secondary{ background: transparent; border:1px solid rgba(255,255,255,.12); color: var(--text); margin-top: 8px;}
.result { margin-top:16px; padding:14px; border:1px dashed rgba(255,255,255,.18); border-radius: 16px; background: rgba(2,6,23,.5); }
.badge { display:inline-block; padding:4px 10px; border-radius:999px; font-size:.75rem; border:1px solid rgba(255,255,255,.2); }
.ticket { margin-top:14px; position:relative; background: linear-gradient(135deg, rgba(167,139,250,.12), rgba(110,231,255,.10)); border:1px solid rgba(255,255,255,.12); border-radius: 18px; padding: 16px; }
.ticket:before, .ticket:after { content:''; position:absolute; top:50%; transform: translateY(-50%); width:18px; height:18px; background: #0f172a; border:1px solid rgba(255,255,255,.15); border-radius:50%; }
.ticket:before{ left:-10px;}
.ticket:after{ right:-10px;}
.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
.small { color:#94a3b8; font-size:.8rem; }
.amount { font-size: 2.2rem; font-weight:800; letter-spacing:.5px; margin:6px 0; }
.tier { font-weight:700; }
footer { margin-top: 18px; font-size: .8rem; color: #94a3b8; text-align:center;}
</style>
</head>
<body>
  <main class="card">
    <h1>üéüÔ∏è Fun Allocation Check</h1>
    <p>Not a real airdrop ‚Äî just vibes. Enter an address and see your <span class="badge">random-but-consistent</span> allocation.</p>
    <label>Project name</label>
    <input id="project" placeholder="e.g., ComputeFi Carnival" value="ComputeFi Carnival">
    <div class="row">
      <div>
        <label>Seed (keeps results consistent)</label>
        <input id="seed" placeholder="Any phrase or number" value="Season-1">
      </div>
      <div>
        <label>Ticker</label>
        <input id="ticker" placeholder="e.g., CARNI" value="CARNI">
      </div>
    </div>
    <label>Wallet address (0x‚Ä¶)</label>
    <input id="address" class="mono" placeholder="0xYourAddress" />
    <div class="row">
      <div>
        <label>Optional: display name</label>
        <input id="name" placeholder="@yourhandle">
      </div>
      <div>
        <label>Network (just for the vibe)</label>
        <select id="chain">
          <option>Ethereum</option>
          <option>Base</option>
          <option>Solana</option>
          <option>Polygon</option>
          <option>BNB Chain</option>
        </select>
      </div>
    </div>
    <button id="check" class="btn">Check allocation</button>
    <button id="download" class="btn secondary" disabled>Download check (PNG)</button><section id="out" class="result" hidden>
  <div class="ticket">
    <div class="small">Project</div>
    <div id="outProject" class="tier"></div>
    <div class="small">For</div>
    <div id="outWho" class="mono"></div>
    <div class="small">Tier</div>
    <div id="outTier" class="tier"></div>
    <div class="small">Allocation</div>
    <div id="outAmount" class="amount"></div>
    <div class="small">Chain</div>
    <div id="outChain"></div>
    <div class="small">Proof (hash)</div>
    <div id="outHash" class="mono small"></div>
  </div>
</section>
<footer>Built for fun. No financial value.</footer>

  </main><script>
/* tiny helpers */
const $ = sel => document.querySelector(sel);
const encoder = new TextEncoder();

async function sha256(text){
  const buf = await crypto.subtle.digest('SHA-256', encoder.encode(text));
  return [...new Uint8Array(buf)].map(b => b.toString(16).padStart(2,'0')).join('');
}
function hexToFloat01(hex8){ // use first 8 hex chars (32 bits)
  const n = parseInt(hex8, 16);
  return n / 0xFFFFFFFF;
}
function format(num){ return num.toLocaleString(undefined, {maximumFractionDigits: 0}); }

function pickTier(x){
  // deterministic tiering by percent
  // 0-0.03: S, 0.03-0.10: A, 0.10-0.25: B, 0.25-0.50: C, 0.50-0.80: D, 0.80-1.00: NGMI
  if(x < 0.03) return {name:'S', amount: 1000};
  if(x < 0.10) return {name:'A', amount: 500};
  if(x < 0.25) return {name:'B', amount: 250};
  if(x < 0.50) return {name:'C', amount: 100};
  if(x < 0.80) return {name:'D', amount: 25};
  return {name:'NGMI', amount: 0};
}

function drawCheckPNG(data){
  const {project, name, address, ticker, chain, tier, amount, proof} = data;
  const w = 1200, h = 600, pad = 40;
  const c = Object.assign(document.createElement('canvas'), {width:w, height:h});
  const ctx = c.getContext('2d');

  // background gradient
  const g = ctx.createLinearGradient(0,0,w,h);
  g.addColorStop(0, '#0f172a');
  g.addColorStop(1, '#1f2937');
  ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

  // accent blobs
  const g2 = ctx.createRadialGradient(0,0,0,0,0,800);
  g2.addColorStop(0,'rgba(167,139,250,0.35)');
  g2.addColorStop(1,'rgba(167,139,250,0)');
  ctx.fillStyle = g2; ctx.beginPath(); ctx.arc(100,80,400,0,Math.PI*2); ctx.fill();
  const g3 = ctx.createRadialGradient(w, h, 0, w, h, 700);
  g3.addColorStop(0,'rgba(110,231,255,0.35)');
  g3.addColorStop(1,'rgba(110,231,255,0)');
  ctx.fillStyle = g3; ctx.beginPath(); ctx.arc(w-80,h-50,350,0,Math.PI*2); ctx.fill();

  // ticket card
  const r = 28;
  ctx.fillStyle = 'rgba(17,24,39,0.8)';
  roundedRect(ctx, pad, pad, w-2*pad, h-2*pad, r);
  ctx.fill();
  ctx.strokeStyle = 'rgba(255,255,255,0.12)';
  ctx.lineWidth = 2; ctx.stroke();

  // "perforation" circles
  ctx.fillStyle = '#0f172a'; ctx.strokeStyle = 'rgba(255,255,255,0.15)';
  circle(ctx, pad-14, h/2, 20); ctx.fill(); ctx.stroke();
  circle(ctx, w-pad+14, h/2, 20); ctx.fill(); ctx.stroke();

  // text
  ctx.fillStyle = '#e5e7eb';
  ctx.font = '700 44px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText(project, pad+32, pad+80);

  ctx.font = '400 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillStyle = '#94a3b8';
  ctx.fillText('For', pad+32, pad+130);
  ctx.fillStyle = '#e5e7eb';
  ctx.font = '600 28px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  const who = name || shortAddress(address);
  ctx.fillText(who, pad+80, pad+130);

  ctx.fillStyle = '#94a3b8';
  ctx.font = '400 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText('Tier', pad+32, pad+180);
  ctx.fillStyle = '#e5e7eb';
  ctx.font = '800 60px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText(tier, pad+100, pad+180);

  ctx.fillStyle = '#94a3b8'; ctx.font = '400 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText('Allocation', pad+32, pad+240);
  ctx.fillStyle = '#e5e7eb'; ctx.font = '800 96px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText(`${format(amount)} ${ticker}`, pad+32, pad+320);

  ctx.fillStyle = '#94a3b8'; ctx.font = '400 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText('Chain', pad+32, pad+370);
  ctx.fillStyle = '#e5e7eb'; ctx.font = '600 28px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText(chain, pad+100, pad+370);

  ctx.fillStyle = '#94a3b8';
  ctx.font = '400 18px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  wrapText(ctx, `Proof: ${proof}`, pad+32, h-pad-80, w-2*pad-64, 24);

  ctx.fillStyle = '#94a3b8';
  ctx.font = '400 16px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto';
  ctx.fillText('This is for fun ‚Äî no monetary value.', pad+32, h-pad-40);

  // footer tag
  ctx.textAlign = 'right';
  ctx.fillStyle = '#cbd5e1'; ctx.font = '600 18px ui-sans-serif, system-ui, -apple-system';
  ctx.fillText('made with üíú by you', w-pad-20, h-pad-24);

  return c.toDataURL('image/png');

  function roundedRect(ctx, x, y, w, h, r){
    ctx.beginPath();
    ctx.moveTo(x+r, y);
    ctx.arcTo(x+w, y, x+w, y+h, r);
    ctx.arcTo(x+w, y+h, x, y+h, r);
    ctx.arcTo(x, y+h, x, y, r);
    ctx.arcTo(x, y, x+w, y, r);
    ctx.closePath();
  }
  function circle(ctx, x, y, r){ ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); }
  function wrapText(ctx, text, x, y, maxWidth, lineHeight){
    const words = text.split(' ');
    let line = '', yy = y;
    for(let n=0;n<words.length;n++){
      const test = line + words[n] + ' ';
      if(ctx.measureText(test).width > maxWidth){
        ctx.fillText(line, x, yy); line = words[n] + ' '; yy += lineHeight;
      } else line = test;
    }
    ctx.fillText(line, x, yy);
  }
  function shortAddress(a){ return a.slice(0,6) + '‚Ä¶' + a.slice(-4); }
}

$('#check').addEventListener('click', async ()=>{
  const project = $('#project').value.trim() || 'Meme Allocation';
  const seed = $('#seed').value.trim() || 'Season-1';
  const ticker = $('#ticker').value.trim().toUpperCase() || 'MEME';
  const address = ($('#address').value || '').trim();
  const chain = $('#chain').value;
  const name = $('#name').value.trim();

  if(!/^0x[a-fA-F0-9]{4,}$/.test(address)){
    alert('Enter a valid address that starts with 0x‚Ä¶'); return;
  }
  const proof = await sha256((address.toLowerCase() + '|' + seed));
  const x = hexToFloat01(proof.slice(0,8));
  const tier = pickTier(x);
  const amount = tier.amount;
  const out = {
    project, name, address, ticker, chain,
    tier: tier.name, amount, proof
  };

  $('#outProject').textContent = project;
  $('#outWho').textContent = name || address;
  $('#outTier').textContent = tier.name;
  $('#outAmount').textContent = `${format(amount)} ${ticker}`;
  $('#outChain').textContent = chain;
  $('#outHash').textContent = proof.slice(0, 32) + '‚Ä¶';
  $('#out').hidden = false;

  const dataUrl = drawCheckPNG(out);
  $('#download').disabled = false;
  $('#download').onclick = ()=>{
    const a = document.createElement('a');
    a.href = dataUrl;
    a.download = `${project.replace(/\s+/g,'_')}_${(name||address).replace(/[^a-zA-Z0-9_-]/g,'')}_${tier.name}.png`;
    a.click();
  };
});
</script></body>
</html>